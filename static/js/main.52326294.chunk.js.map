{"version":3,"sources":["components/Header.js","utils/randomMovie.js","components/SearchForm.js","components/Error.js","components/Loader.js","utils/dateConverter.js","components/MovieList.js","components/Pagination.js","utils/getData.js","App.js","variables/variables.js","index.js"],"names":["Header","className","randomMovie","moviesList","Math","floor","random","length","SearchForm","getMovies","setSearchBtnRef","searchInputRef","useRef","searchBtnRef","useEffect","current","focus","onSubmit","type","name","placeholder","ref","Error","error","Loader","dateConverter","str","parts","split","MovieList","movies","filter","movie","poster_path","map","key","id","src","alt","title","release_date","vote_average","overview","Pagination","setPage","setMovies","totalPages","page","pageLinks","i","push","href","onClick","e","preventDefault","setTimeout","click","changePage","getData","url","a","fetch","response","json","data","App","useState","apiKey","baseUrl","undefined","loading","setLoading","setTotalPages","prevQuery","setPrevQuery","setError","inputValue","target","elements","query","value","trim","pageChoice","results","total_results","countOfPages","total_pages","pageLimit","clearState","ReactDOM","render","document","getElementById"],"mappings":"8NAIeA,EAFA,kBAAM,wBAAIC,UAAU,UAAd,aCmBNC,EArBK,WAClB,IAAMC,EAAa,CACjB,2BACA,2BACA,iCACA,uCACA,iCACA,+DACA,6CACA,uCACA,6CACA,uCACA,8CAIID,EAAcC,EADAC,KAAKC,MAAMD,KAAKE,SAAWH,EAAWI,SAG1D,OAAOL,GCWMM,EA1BI,SAAC,GAAoC,IAAlCC,EAAiC,EAAjCA,UAAWC,EAAsB,EAAtBA,gBACzBC,EAAiBC,mBACjBC,EAAeD,mBAQrB,OANAE,qBAAU,WACRJ,EAAgBG,KACf,IAEHC,qBAAU,kBAAMH,EAAeI,QAAQC,WAGrC,0BAAMf,UAAU,cAAcgB,SAAUR,GACtC,2BACER,UAAU,eACViB,KAAK,OACLC,KAAK,QACLC,YAAW,gEAAgBlB,IAAhB,QACXmB,IAAKV,IAEP,4BAAQV,UAAU,aAAaiB,KAAK,SAASG,IAAKR,GAAlD,oCClBSS,EAFD,SAAC,GAAD,IAAGC,EAAH,EAAGA,MAAH,OAAe,uBAAGtB,UAAU,SAASsB,ICSpCC,EATA,kBACb,yBAAKvB,UAAU,UACb,8BACA,8BACA,8BACA,gCCFWwB,EALO,SAAAC,GACpB,IAAIC,EAAQD,EAAIE,MAAM,KACtB,MAAM,GAAN,OAAUD,EAAM,GAAhB,YAAsBA,EAAM,GAA5B,YAAkCA,EAAM,KC2B3BE,EA1BG,SAAC,GAAD,IAAGC,EAAH,EAAGA,OAAH,OAChB,yBAAK7B,UAAU,cACZ6B,EACEC,QAAO,SAAAC,GAAK,OAAIA,EAAMC,eACtBC,KAAI,SAAAF,GAAK,OACR,yBAAK/B,UAAU,OAAOkC,IAAKH,EAAMI,IAC/B,yBACEnC,UAAU,aACVoC,IAAG,0DACDL,EAAMC,aAERK,IAAG,UAAKN,EAAMO,MAAX,aAEL,yBAAKtC,UAAU,gBACb,wBAAIA,UAAU,cAAc+B,EAAMO,OAClC,uBAAGtC,UAAU,aAAb,qDACawB,EAAcO,EAAMQ,eAEjC,uBAAGvC,UAAU,aAAb,+CAAmC+B,EAAMS,cACzC,uBAAGxC,UAAU,oBAAoB+B,EAAMU,iBCWpCC,EA/BI,SAAC,GAUlB,IAV8E,IAA1DC,EAAyD,EAAzDA,QAASC,EAAgD,EAAhDA,UAAWhC,EAAqC,EAArCA,aAAciC,EAAuB,EAAvBA,WAAYC,EAAW,EAAXA,KAQ5DC,EAAY,GAR2D,WAUpEC,GACPD,EAAUE,KACR,wBAAIjD,UAAU,kBAAkBkC,IAAKc,GACnC,uBACEhD,UACE8C,GAAQE,EACJ,yCACA,0CAENE,KAAK,IACLC,QAASL,GAAQE,EAAI,SAAAI,GAAC,OAAIA,EAAEC,kBAAmB,SAAAD,GAAC,OAnBrC,SAACA,EAAGN,GACrBM,EAAEC,iBACFV,EAAQG,GACRF,EAAU,IACVU,YAAW,kBAAM1C,EAAaE,QAAQyC,WAeoBC,CAAWJ,EAAGJ,KAEjEA,MAZAA,EAAI,EAAGA,GAAKH,EAAYG,IAAM,EAA9BA,GAkBT,OAAO,wBAAIhD,UAAU,cAAc+C,ICxBtBU,EANF,uCAAG,WAAMC,GAAN,iBAAAC,EAAA,sEACSC,MAAMF,GADf,cACRG,EADQ,gBAEKA,EAASC,OAFd,cAERC,EAFQ,yBAGPA,GAHO,2CAAH,sDCiFEC,G,YArEH,WAAO,IAAD,EACCC,mBCbI,oCDadC,EADS,sBAEED,mBCZlB,gFDYOE,EAFS,sBAGYF,mBAAS,IAHrB,mBAGTpC,EAHS,KAGDe,EAHC,OAIcqB,wBAASG,GAJvB,mBAITC,EAJS,KAIAC,EAJA,OAKoBL,wBAASG,GAL7B,mBAKTvB,EALS,KAKG0B,EALH,OAMQN,wBAASG,GANjB,mBAMTtB,EANS,KAMHH,EANG,OAOkBsB,wBAASG,GAP3B,mBAOTI,EAPS,KAOEC,EAPF,OAQUR,wBAASG,GARnB,mBAQT9C,EARS,KAQFoD,EARE,OASwBT,wBAASG,GATjC,mBASTxD,EATS,KASKH,EATL,KAWVD,EAAS,uCAAG,WAAM4C,GAAN,iCAAAO,EAAA,6DAChBP,EAAEC,iBAEIsB,EAAavB,EAAEwB,OAAOC,SAASC,MAAMC,OACrCD,EAAQH,EAAWK,SAEdV,GAAW,GAClBhD,GAAOgD,GAAW,GAEhBW,EAAaH,IAAUN,EAAY7B,EAAQ,GAAKG,EAChDY,EAVU,UAUDS,EAVC,oBAUkBD,EAVlB,kBAUkCY,EAVlC,iBAUgDG,GAVhD,SAWGxB,EAAQC,GAXX,OAWVK,EAXU,OAaVmB,EAAUnB,EAAKoB,cACftD,EAASkC,EAAKmB,QACdE,EAAerB,EAAKsB,YACpBC,EAAYF,EAAe,GAAK,GAAKA,EAErCG,EAAa,WACjB3C,EAAU,IACV2B,EAAc,GACdD,GAAW,IAGRQ,EAGOI,EAGDA,IACTtC,EAAUf,GACV4C,EAAaK,GACbP,EAAce,GACdZ,OAASN,GACTE,GAAW,KAPXiB,IACAb,EAAS,uFAJTa,IACAb,OAASN,IA1BK,4CAAH,sDAuCf,OACE,yBAAKpE,UAAU,OACb,kBAAC,EAAD,MACA,kBAAC,EAAD,CAAYQ,UAAWA,EAAWC,gBAAiBA,IAClDa,EAAQ,kBAAC,EAAD,CAAOA,MAAOA,IAAY,kBAAC,EAAD,CAAWO,OAAQA,IACrDwC,GAAW,kBAAC,EAAD,OACVA,GAAWxB,EAAa,GACxB,kBAAC,EAAD,CACEC,KAAMA,EACND,WAAYA,EACZF,QAASA,EACTC,UAAWA,EACXhC,aAAcA,OEtExB4E,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,U","file":"static/js/main.52326294.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Header = () => <h1 className=\"header\">Movie Db</h1>;\r\n\r\nexport default Header;\r\n","const randomMovie = () => {\r\n  const moviesList = [\r\n    \"Шрек\",\r\n    \"Пила\",\r\n    \"Чужой\",\r\n    \"Бэтмен\",\r\n    \"Рэмбо\",\r\n    \"Терминатор\",\r\n    \"Аладдин\",\r\n    \"Аватар\",\r\n    \"Титаник\",\r\n    \"Сияние\",\r\n    \"Дракула\"\r\n  ];\r\n\r\n  const randomIndex = Math.floor(Math.random() * moviesList.length);\r\n  const randomMovie = moviesList[randomIndex];\r\n\r\n  return randomMovie;\r\n};\r\n\r\nexport default randomMovie;\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport randomMovie from \"../utils/randomMovie\";\r\n\r\nconst SearchForm = ({ getMovies, setSearchBtnRef }) => {\r\n  const searchInputRef = useRef();\r\n  const searchBtnRef = useRef();\r\n\r\n  useEffect(() => {\r\n    setSearchBtnRef(searchBtnRef);\r\n  }, []);\r\n\r\n  useEffect(() => searchInputRef.current.focus());\r\n\r\n  return (\r\n    <form className=\"search-form\" onSubmit={getMovies}>\r\n      <input\r\n        className=\"search-input\"\r\n        type=\"text\"\r\n        name=\"query\"\r\n        placeholder={`Например, «${randomMovie()}»`}\r\n        ref={searchInputRef}\r\n      />\r\n      <button className=\"search-btn\" type=\"submit\" ref={searchBtnRef}>\r\n        Найти\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default SearchForm;\r\n","import React from \"react\";\r\n\r\nconst Error = ({ error }) => <p className=\"error\">{error}</p>;\r\n\r\nexport default Error;\r\n","import React from \"react\";\r\n\r\nconst Loader = () => (\r\n  <div className=\"loader\">\r\n    <div />\r\n    <div />\r\n    <div />\r\n    <div />\r\n  </div>\r\n);\r\n\r\nexport default Loader;\r\n","const dateConverter = str => {\r\n  let parts = str.split(\"-\");\r\n  return `${parts[2]}.${parts[1]}.${parts[0]}`;\r\n};\r\n\r\nexport default dateConverter;\r\n","import React from \"react\";\r\nimport dateConverter from \"../utils/dateConverter\";\r\n\r\nconst MovieList = ({ movies }) => (\r\n  <div className=\"movie-list\">\r\n    {movies\r\n      .filter(movie => movie.poster_path)\r\n      .map(movie => (\r\n        <div className=\"card\" key={movie.id}>\r\n          <img\r\n            className=\"card-image\"\r\n            src={`https://image.tmdb.org/t/p/w185_and_h278_bestv2/${\r\n              movie.poster_path\r\n            }`}\r\n            alt={`${movie.title} poster`}\r\n          />\r\n          <div className=\"card-content\">\r\n            <h3 className=\"card-title\">{movie.title}</h3>\r\n            <p className=\"card-info\">\r\n              Премьера: {dateConverter(movie.release_date)}\r\n            </p>\r\n            <p className=\"card-info\">Рейтинг: {movie.vote_average}</p>\r\n            <p className=\"card-description\">{movie.overview}</p>\r\n          </div>\r\n        </div>\r\n      ))}\r\n  </div>\r\n);\r\n\r\nexport default MovieList;\r\n","import React from \"react\";\r\n\r\nconst Pagination = ({ setPage, setMovies, searchBtnRef, totalPages, page }) => {\r\n  const changePage = (e, page) => {\r\n    e.preventDefault();\r\n    setPage(page);\r\n    setMovies([]);\r\n    setTimeout(() => searchBtnRef.current.click());\r\n  };\r\n\r\n  const pageLinks = [];\r\n\r\n  for (let i = 1; i <= totalPages; i++) {\r\n    pageLinks.push(\r\n      <li className=\"pagination-item\" key={i}>\r\n        <a\r\n          className={\r\n            page == i\r\n              ? \"pagination-link pagination-link-active\"\r\n              : \"pagination-link pagination-link-passive\"\r\n          }\r\n          href=\"#\"\r\n          onClick={page == i ? e => e.preventDefault() : e => changePage(e, i)}\r\n        >\r\n          {i}\r\n        </a>\r\n      </li>\r\n    );\r\n  }\r\n\r\n  return <ul className=\"pagination\">{pageLinks}</ul>;\r\n};\r\n\r\nexport default Pagination;\r\n","const getData = async url => {\r\n  const response = await fetch(url);\r\n  const data = await response.json();\r\n  return data;\r\n};\r\n\r\nexport default getData;\r\n","import React, { useState } from \"react\";\r\nimport Header from \"./components/Header\";\r\nimport SearchForm from \"./components/SearchForm\";\r\nimport Error from \"./components/Error\";\r\nimport Loader from \"./components/Loader\";\r\nimport MovieList from \"./components/MovieList\";\r\nimport Pagination from \"./components/Pagination\";\r\nimport { api_key, base_url } from \"./variables/variables\";\r\nimport getData from \"./utils/getData\";\r\nimport \"./styles/style.css\";\r\nimport \"./styles/media.css\";\r\n\r\nconst App = () => {\r\n  const [apiKey] = useState(api_key);\r\n  const [baseUrl] = useState(base_url);\r\n  const [movies, setMovies] = useState([]);\r\n  const [loading, setLoading] = useState(undefined);\r\n  const [totalPages, setTotalPages] = useState(undefined);\r\n  const [page, setPage] = useState(undefined);\r\n  const [prevQuery, setPrevQuery] = useState(undefined);\r\n  const [error, setError] = useState(undefined);\r\n  const [searchBtnRef, setSearchBtnRef] = useState(undefined);\r\n\r\n  const getMovies = async e => {\r\n    e.preventDefault();\r\n\r\n    const inputValue = e.target.elements.query.value;\r\n    const query = inputValue.trim();\r\n\r\n    if (query) setLoading(true);\r\n    if (error) setLoading(false);\r\n\r\n    const pageChoice = query !== prevQuery ? setPage(1) : page;\r\n    const url = `${baseUrl}&api_key=${apiKey}&query=${query}&page=${pageChoice}`;\r\n    const data = await getData(url);\r\n\r\n    const results = data.total_results;\r\n    const movies = data.results;\r\n    const countOfPages = data.total_pages;\r\n    const pageLimit = countOfPages > 10 ? 10 : countOfPages;\r\n    \r\n    const clearState = () => {\r\n      setMovies([]);\r\n      setTotalPages(0);\r\n      setLoading(false);\r\n    };\r\n\r\n    if (!query) {\r\n      clearState();\r\n      setError(undefined);\r\n    } else if (!results) {\r\n      clearState();\r\n      setError(\"Фильм не найден.\");\r\n    } else if (results) {\r\n      setMovies(movies);\r\n      setPrevQuery(query);\r\n      setTotalPages(pageLimit);\r\n      setError(undefined);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <Header />\r\n      <SearchForm getMovies={getMovies} setSearchBtnRef={setSearchBtnRef} />\r\n      {error ? <Error error={error} /> : <MovieList movies={movies} />}\r\n      {loading && <Loader />}\r\n      {!loading && totalPages > 1 && (\r\n        <Pagination\r\n          page={page}\r\n          totalPages={totalPages}\r\n          setPage={setPage}\r\n          setMovies={setMovies}\r\n          searchBtnRef={searchBtnRef}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","export const api_key = \"3b33b8c8d2c93ecef17e3034abad89bd\";\r\nexport const base_url =\r\n  \"https://api.themoviedb.org/3/search/movie?include_adult=false&language=ru-RU\";\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}